<div id="wheelContainer" style="display: none;background: #18191c;background-attachment: fixed;">
    <link rel="stylesheet" href="./assets/css/landing.css">

    <%- include('./includes/wheel-sidebar') %>

    <!-- MAIN CONTENT: Right column with topbar and WHEEL -->
    <div class="landing-main-column">
        <!-- TOPBAR: Full-width header -->
        <div class="landing-topbar">
            <div class="topbar-left">
                <div style="display:flex;gap:12px;align-items:center;flex:1;">
                    <div class="quick-play-section">
                        <span class="quick-play-label" style="color:#ff9500 !important;">ROUE DE FORTUNE</span>
                        <div class="quick-play-divider"></div>
                        <div style="flex:1;overflow:hidden;position:relative;display:flex;align-items:center;">
                            <span style="font-size:0.75em;color:#fff;font-weight:700;letter-spacing:0.5px;animation:scrollText 18s linear infinite;white-space:nowrap;">Tentez votre chance et gagnez des récompenses!&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                        </div>
                        <div class="quick-play-divider" style="margin-left:auto;"></div>
                        <button id="refreshMediaButtonWheel" class="topbar-action-btn" title="Refresh" style="display:flex;gap:4px;align-items:center;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36M20.49 15a9 9 0 0 1-14.85 3.36"></path></svg></button>
                    </div>
                </div>
            </div>

            <div class="topbar-right">
                <div class="user_content profile-card" style="cursor:pointer;">
                    <div class="profile-avatar"></div>
                    <div class="profile-text">
                        <span class="profile-label">Connecté sur</span>
                        <span class="profile-name"></span>
                    </div>
                    <div class="profile-separator"></div>
                    <div class="profile-tokens">
                        <img src="./assets/images/jetons.png" alt="Jetons" class="tokens-icon">
                        <span class="tokens-balance">0</span>
                    </div>
                </div>
                <div class="topbar-actions">
                    <a id="wheel_mailButton" class="topbar-btn" href="mailto:vanylaplus.info@gmail.com" title="Mail" style="cursor:pointer;text-decoration:none;color:inherit;display:flex;align-items:center;font-size:0.8em;">✉</a>
                    <a id="wheel_discordButton" class="topbar-btn" href="https://discord.gg/NQGF2FBCWu" target="_blank" title="Discord" style="color:#fff;font-size:0.75em;cursor:pointer;display:flex;align-items:center;justify-content:center;text-decoration:none;">
                        <svg width="16" height="16" viewBox="0 0 127.14 96.36" style="fill:currentColor;">
                            <path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0A105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a77.15,77.15,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.22,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60.55,31,53.88s5-11.75,11.45-11.75S54,47.16,53.89,53.88,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60.55,73.25,53.88s5-11.75,11.44-11.75S96.23,47.16,96.12,53.88,91.08,65.69,84.69,65.69Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>

        <!-- WHEEL CONTENT: Scrollable main area -->
        <div style="display:flex;flex:1;overflow:hidden;background:#18191c;">
            <div style="flex:1;overflow-y:auto;padding:0;background:#18191c;">
                <div style="max-width:100%;width:100%;margin:0;padding:0;">
                    <!-- WHEEL HEADER SECTION -->
                    <div style="background:linear-gradient(135deg, rgba(20, 20, 20, 0.85) 0%, rgba(30, 30, 30, 0.85) 100%), url('./assets/images/backgrounds/box.jpg') center/cover;padding:65px 32px;margin:0;border-bottom:1.5px solid rgba(255,255,255,0.05);">
                        <div style="display:flex;align-items:center;justify-content:center;gap:16px;flex-wrap:wrap;">
                            <div style="text-align:center;flex:1;min-width:300px;">
                                <h1 style="color:#fff;font-size:3em;margin:0 0 20px 0;font-weight:900;letter-spacing:-1px;text-shadow:0 4px 12px rgba(0,0,0,0.6);">Roue de Fortune</h1>
                                <p style="color:rgba(255,255,255,0.75);font-size:1.15em;margin:0;letter-spacing:0.5px;">Tentez vos chance et remportez des jetons quotidiennement</p>
                            </div>
                        </div>
                    </div>

                    <!-- WHEEL Content -->
                    <div style="padding:30px 30px 60px 30px;display:flex;align-items:flex-start;justify-content:center;background:#18191c;">
            
            <!-- MAIN BOX - CONTAINS EVERYTHING -->
            <div style="flex:1;min-height:min-content;background:rgba(255,255,255,0.04);border:1.5px solid rgba(255,255,255,0.1);border-radius:8px;backdrop-filter:blur(20px);display:flex;flex-direction:row;overflow-y:hidden;overflow-x:hidden;box-shadow:none;box-sizing:border-box;max-width:1400px;">
                
                <!-- LEFT SECTION: WHEEL & BUTTON -->
                <div style="flex:0 0 auto;width:55%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;padding:40px;border-right:1px solid rgba(255,255,255,0.08);">
                    
                    <!-- Wheel Canvas -->
                    <div style="position:relative;width:540px;height:540px;display:flex;align-items:center;justify-content:center;">
                        <canvas id="wheel_canvas" width="600" height="600" style="position:absolute;width:100%;height:100%;border-radius:50%;"></canvas>
                    </div>

                    <!-- Spin Button -->
                    <button id="wheel_spinButton" style="position:relative;padding:16px 56px;font-size:0.95em;cursor:pointer;border:none;background:linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);color:#fff;border-radius:12px;transition:all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);font-weight:900;text-transform:uppercase;letter-spacing:2px;display:flex;align-items:center;justify-content:center;gap:10px;box-shadow:0 12px 32px rgba(46,204,113,0.3), 0 0 20px rgba(46,204,113,0.15);overflow:hidden;z-index:10;width:100%;max-width:340px;">
                        <span style="position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);animation:shimmerClean 3s infinite;"></span>
                        <span style="position:relative;z-index:2;display:flex;align-items:center;gap:8px;width:100%;justify-content:center;">
                            <span style="font-size:1.1em;">TOURNER</span>
                        </span>
                    </button>
                    
                    <!-- Cooldown Message -->
                    <div id="wheel_cooldownMessage" style="display:none;text-align:center;margin-top:12px;font-size:0.9em;color:#ff6b6b;font-weight:600;letter-spacing:0.5px;">
                        Reviens dans <span id="wheel_timeRemaining">--</span>
                    </div>
                </div>

                <!-- RIGHT SECTION: RULES & REWARDS -->
                <div style="flex:0 0 auto;width:45%;display:flex;flex-direction:column;overflow-y:hidden;overflow-x:hidden;padding:32px 32px 32px 32px;border:1px solid rgba(255,255,255,0.08);border-left:none;border-right:1px solid rgba(255,255,255,0.08);border-radius:0 20px 20px 0;justify-content:flex-start;gap:16px;">                    
                    <!-- Rules Section -->
                    <div style="margin-bottom:0;margin-right:165px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:12px;">
                        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
                            <div style="width:4px;height:24px;background:#ff8c00;border-radius:2px;"></div>
                            <h3 style="color:#fff;font-size:0.95em;margin:0;font-weight:800;letter-spacing:-0.5px;">RÈGLES</h3>
                        </div>
                        <div style="display:flex;flex-direction:column;gap:4px;">
                            <div style="color:rgba(255,255,255,0.65);font-size:0.75em;line-height:1.3;">
                                ✓ Cliquez <strong>TOURNER</strong>
                            </div>
                            <div style="color:rgba(255,255,255,0.65);font-size:0.75em;line-height:1.3;">
                                ✓ 3 secondes de spin
                            </div>
                            <div style="color:rgba(255,255,255,0.65);font-size:0.75em;line-height:1.3;">
                                ✓ Gagnez les jetons!
                            </div>
                        </div>
                    </div>

                    <!-- Rewards Section -->
                    <div style="background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:12px;max-height:none;overflow-y:hidden;margin-right:165px;">
                        <div style="display:flex;align-items:center;gap:10px;margin-bottom:8px;">
                            <div style="width:4px;height:24px;background:#2ecc71;border-radius:2px;"></div>
                            <h3 style="color:#fff;font-size:0.95em;margin:0;font-weight:800;letter-spacing:-0.5px;">RÉCOMPENSES</h3>
                        </div>

                        <!-- Rewards List -->
                        <div style="display:flex;flex-direction:column;gap:4px;">
                            
                            <!-- Reward 1 -->
                            <div style="background:rgba(46,204,113,0.12);border-left:3px solid #2ecc71;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;">
                                <div>
                                    <div style="color:#2ecc71;font-weight:800;display:flex;align-items:center;gap:4px;font-size:0.9em;">1 <img src="./assets/images/jetons.png" alt="jeton" style="height:14px;width:auto;"></div>
                                    <div style="color:rgba(255,255,255,0.5);font-size:0.7em;margin-top:2px;">Commun</div>
                                </div>
                                <div style="background:rgba(46,204,113,0.25);color:#2ecc71;padding:2px 6px;border-radius:4px;font-weight:700;font-size:0.7em;">25%</div>
                            </div>

                            <!-- Reward 2 -->
                            <div style="background:rgba(46,204,113,0.12);border-left:3px solid #2ecc71;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;">
                                <div>
                                    <div style="color:#2ecc71;font-weight:800;display:flex;align-items:center;gap:4px;font-size:0.9em;">2 <img src="./assets/images/jetons.png" alt="jeton" style="height:14px;width:auto;"></div>
                                    <div style="color:rgba(255,255,255,0.5);font-size:0.7em;margin-top:2px;">Commun</div>
                                </div>
                                <div style="background:rgba(46,204,113,0.25);color:#2ecc71;padding:2px 6px;border-radius:4px;font-weight:700;font-size:0.7em;">23%</div>
                            </div>

                            <!-- Reward 3 -->
                            <div style="background:rgba(0,212,255,0.12);border-left:3px solid #00d4ff;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;">
                                <div>
                                    <div style="color:#00d4ff;font-weight:800;display:flex;align-items:center;gap:4px;font-size:0.9em;">10 <img src="./assets/images/jetons.png" alt="jeton" style="height:14px;width:auto;"></div>
                                    <div style="color:rgba(255,255,255,0.5);font-size:0.7em;margin-top:2px;">Peu Commun</div>
                                </div>
                                <div style="background:rgba(0,212,255,0.25);color:#00d4ff;padding:2px 6px;border-radius:4px;font-weight:700;font-size:0.7em;">12%</div>
                            </div>

                            <!-- Reward 4 -->
                            <div style="background:rgba(0,212,255,0.12);border-left:3px solid #00d4ff;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;">
                                <div>
                                    <div style="color:#00d4ff;font-weight:800;display:flex;align-items:center;gap:4px;font-size:0.9em;">15 <img src="./assets/images/jetons.png" alt="jeton" style="height:14px;width:auto;"></div>
                                    <div style="color:rgba(255,255,255,0.5);font-size:0.7em;margin-top:2px;">Rare</div>
                                </div>
                                <div style="background:rgba(0,212,255,0.25);color:#00d4ff;padding:2px 6px;border-radius:4px;font-weight:700;font-size:0.7em;">10%</div>
                            </div>

                            <!-- Reward 5 -->
                            <div style="background:rgba(255,215,0,0.12);border-left:3px solid #ffd700;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;">
                                <div>
                                    <div style="color:#ffd700;font-weight:800;display:flex;align-items:center;gap:4px;font-size:0.9em;">30 <img src="./assets/images/jetons.png" alt="jeton" style="height:14px;width:auto;"></div>
                                    <div style="color:rgba(255,255,255,0.5);font-size:0.7em;margin-top:2px;">Très Rare</div>
                                </div>
                                <div style="background:rgba(255,215,0,0.25);color:#ffd700;padding:2px 6px;border-radius:4px;font-weight:700;font-size:0.7em;">4%</div>
                            </div>

                            <!-- Reward 6 -->
                            <div style="background:rgba(255,139,0,0.15);border-left:3px solid #ff8c00;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;">
                                <div>
                                    <div style="color:#ff8c00;font-weight:800;display:flex;align-items:center;gap:4px;font-size:0.9em;">50 <img src="./assets/images/jetons.png" alt="jeton" style="height:14px;width:auto;"></div>
                                    <div style="color:rgba(255,139,0,0.8);font-size:0.7em;margin-top:2px;">LÉGENDAIRE</div>
                                </div>
                                <div style="background:rgba(255,139,0,0.3);color:#ff8c00;padding:2px 6px;border-radius:4px;font-weight:800;font-size:0.7em;">2%</div>
                            </div>

                            <!-- Reward 7 - SUPER LEGENDARY -->
                            <div style="background:linear-gradient(135deg, rgba(255,215,0,0.22) 0%, rgba(255,50,0,0.15) 100%);border-left:3px solid #ff1744;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;box-shadow:none;">
                                <div>
                                    <div style="color:#ff1744;font-weight:900;display:flex;align-items:center;gap:4px;font-size:0.9em;">250 <img src="./assets/images/jetons.png" alt="jeton" style="height:14px;width:auto;"></div>
                                    <div style="color:rgba(255,23,68,0.9);font-size:0.7em;margin-top:2px;font-weight:700;">MYTHIQUE</div>
                                </div>
                                <div style="background:rgba(255,23,68,0.3);color:#ff1744;padding:2px 6px;border-radius:4px;font-weight:800;font-size:0.7em;">0.001%</div>
                            </div>

                            <!-- Reward 8 - Relance -->
                            <div style="background:rgba(156,39,176,0.15);border-left:3px solid #9c27b0;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;">
                                <div>
                                    <div style="color:#9c27b0;font-weight:800;font-size:0.9em;">⟳ Relance</div>
                                    <div style="color:rgba(255,255,255,0.5);font-size:0.7em;margin-top:2px;">Retentez votre chance</div>
                                </div>
                                <div style="background:rgba(156,39,176,0.3);color:#9c27b0;padding:2px 6px;border-radius:4px;font-weight:700;font-size:0.7em;">15%</div>
                            </div>

                            <!-- Reward 9 - Fail -->
                            <div style="background:rgba(255,255,255,0.05);border-left:3px solid #999;border-radius:8px;padding:12px;display:flex;justify-content:space-between;align-items:center;font-size:0.84em;opacity:0.75;">
                                <div>
                                    <div style="color:#ccc;font-weight:800;font-size:0.9em;">✗ Malchance</div>
                                    <div style="color:rgba(255,255,255,0.4);font-size:0.7em;margin-top:2px;">Pas de gain</div>
                                </div>
                                <div style="background:rgba(200,200,200,0.2);color:#aaa;padding:2px 6px;border-radius:4px;font-weight:700;font-size:0.7em;">8.999%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div> <!-- Close WHEEL content wrapper -->
                    </div> <!-- Close inner wrapper -->
            </div> <!-- Close scrollable container -->
        </div> <!-- Close main container -->
    </div>
</div>

<style>
    @keyframes shimmerClean {
        0% { left: -100%; }
        100% { left: 100%; }
    }

    #wheel_spinButton:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 20px 50px rgba(255, 139, 0, 0.4), 0 0 40px rgba(255,139,0,0.2);
    }

    #wheel_spinButton:active {
        transform: translateY(-1px) scale(0.97);
        box-shadow: 0 8px 20px rgba(255, 139, 0, 0.25);
    }

    #wheel_spinButton:disabled {
        opacity: 0.6;
        cursor: not-allowed;
    }

    #wheelContainer {
        display: grid;
        grid-template-columns: 80px 1fr;
        gap: 0;
        height: 100vh;
        margin: 0;
        padding: 0;
        width: 100vw;
    }

    #wheelContainer[style*="display: none"] {
        display: none !important;
    }

    #wheelContainer .landing-main-column {
        width: 100% !important;
        grid-column: 2 !important;
        grid-row: 1 / -1 !important;
    }
</style>

<script src="./assets/js/scripts/wheel.js"></script>
