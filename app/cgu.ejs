<div id="cguContainer" style="display: none;background: #18191c;background-attachment: fixed;">
    <link rel="stylesheet" href="./assets/css/landing.css">

    <%- include('./includes/cgu-sidebar') %>

    <!-- MAIN CONTENT: Right column with topbar and CGU -->
    <div class="landing-main-column">
        <!-- TOPBAR: Full-width header -->
        <div class="landing-topbar">
            <div class="topbar-left">
                <div style="display:flex;gap:12px;align-items:center;flex:1;">
                    <div class="quick-play-section">
                        <span class="quick-play-label" style="color:#ff9500 !important;">INFORMATION</span>
                        <div class="quick-play-divider"></div>
                        <div style="flex:1;overflow:hidden;position:relative;display:flex;align-items:center;">
                            <span style="font-size:0.75em;color:#fff;font-weight:700;letter-spacing:0.5px;animation:scrollText 18s linear infinite;white-space:nowrap;">Conditions G√©n√©rales d'Utilisation - CGU&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
                        </div>
                        <div class="quick-play-divider" style="margin-left:auto;"></div>
                        <button id="refreshMediaButton" class="topbar-action-btn" title="Refresh" style="display:flex;gap:4px;align-items:center;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36M20.49 15a9 9 0 0 1-14.85 3.36"></path></svg></button>
                    </div>
                </div>
            </div>

            <div class="topbar-right">
                <div class="user_content profile-card" style="cursor:pointer;">
                    <div class="profile-avatar"></div>
                    <div class="profile-text">
                        <span class="profile-label">Connect√© sur</span>
                        <span class="profile-name"></span>
                    </div>
                    <div class="profile-separator"></div>
                    <div class="profile-tokens">
                        <img src="./assets/images/jetons.png" alt="Jetons" class="tokens-icon">
                        <span class="tokens-balance">0</span>
                    </div>
                </div>
                <div class="topbar-actions">
                    <a id="cgu_mailButton" class="topbar-btn" href="mailto:vanylaplus.info@gmail.com" title="Mail" style="cursor:pointer;text-decoration:none;color:inherit;display:flex;align-items:center;font-size:0.8em;">‚úâ</a>
                    <a id="cgu_discordButton" class="topbar-btn" href="https://discord.gg/NQGF2FBCWu" target="_blank" title="Discord" style="color:#fff;font-size:0.75em;cursor:pointer;display:flex;align-items:center;justify-content:center;text-decoration:none;">
                        <svg width="16" height="16" viewBox="0 0 127.14 96.36" style="fill:currentColor;">
                            <path d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0A105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a77.15,77.15,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.22,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60.55,31,53.88s5-11.75,11.45-11.75S54,47.16,53.89,53.88,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60.55,73.25,53.88s5-11.75,11.44-11.75S96.23,47.16,96.12,53.88,91.08,65.69,84.69,65.69Z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>

        <!-- CGU CONTENT: Scrollable main area -->
        <div style="display:flex;flex:1;overflow:hidden;">
            <div style="flex:1;overflow-y:auto;padding:0;">
                <div style="max-width:100%;width:100%;margin:0;padding:0;">
                    <!-- SHOP HEADER SECTION -->
                    <div style="background:linear-gradient(135deg, rgba(20, 20, 20, 0.85) 0%, rgba(30, 30, 30, 0.85) 100%), url('./assets/images/backgrounds/box.jpg') center/cover;padding:32px 18px;margin:0;border-bottom:1px solid rgba(120, 120, 120, 0.15);">
                        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;gap:16px;">
                            <button id="shopInventoryBtn" style="padding:10px 20px;background:linear-gradient(135deg, rgba(0, 144, 255, 0.9) 0%, rgba(0, 112, 204, 0.9) 100%);border:1px solid rgba(0, 144, 255, 0.4);border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:0.95em;white-space:nowrap;" onmouseover="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 1) 0%, rgba(0, 112, 204, 1) 100%)';this.style.boxShadow='0 8px 16px rgba(0, 144, 255, 0.4)';this.style.transform='translateY(-2px)';" onmouseout="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 0.9) 0%, rgba(0, 112, 204, 0.9) 100%)';this.style.boxShadow='none';this.style.transform='translateY(0)';">
                                üì¶ Inventaire
                            </button>
                            <h1 style="color:#fff;font-size:2em;margin:0;font-weight:700;flex:1;text-align:center;">VanylaPlus Store</h1>
                            <div style="width:100px;"></div>
                        </div>
                        
                        <!-- Search Bar -->
                        <div style="display:flex;gap:12px;margin-bottom:24px;max-width:600px;margin-left:auto;margin-right:auto;">
                            <input type="text" id="shopSearchInput" placeholder="Rechercher un produit..." style="flex:1;padding:12px 16px;border-radius:8px;border:1px solid rgba(120, 120, 120, 0.3);background:rgba(30, 30, 30, 0.8);color:#fff;font-size:0.95em;transition:all 0.3s ease;"/>
                            <button style="padding:12px 24px;background:linear-gradient(135deg, #0090ff 0%, #0070cc 100%);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:0.95em;">Rechercher</button>
                        </div>

                        <!-- Category Filter -->
                        <div style="display:flex;gap:8px;justify-content:center;flex-wrap:wrap;">
                            <button class="shop-filter-btn" data-filter="all" style="padding:8px 16px;background:rgba(0, 144, 255, 0.9);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:0.9em;">Tous</button>
                            <button class="shop-filter-btn" data-filter="jetons" style="padding:8px 16px;background:rgba(144, 238, 144, 0.18);border:1px solid rgba(144, 238, 144, 0.4);border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:0.9em;">Jetons</button>
                            <button class="shop-filter-btn" data-filter="cosmetics" style="padding:8px 16px;background:rgba(120, 120, 120, 0.3);border:1px solid rgba(120, 120, 120, 0.4);border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:0.9em;">Cosm√©tiques</button>
                            <button class="shop-filter-btn" data-filter="capes" style="padding:8px 16px;background:rgba(120, 120, 120, 0.3);border:1px solid rgba(120, 120, 120, 0.4);border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:0.9em;">Capes</button>
                            <button class="shop-filter-btn" data-filter="items" style="padding:8px 16px;background:rgba(120, 120, 120, 0.3);border:1px solid rgba(120, 120, 120, 0.4);border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:0.9em;">Emotes</button>
                        </div>
                    </div>

                    <!-- PRODUCTS GRID -->
                    <div id="shopProductsGrid" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(250px, 1fr));gap:20px;padding:32px 18px;">
                        <!-- Products will be injected here by JavaScript -->
                    </div>

                    <!-- EMPTY STATE -->
                    <div id="shopEmptyState" style="display:none;text-align:center;padding:64px 32px;color:rgba(255, 255, 255, 0.6);">
                        <p style="font-size:1.1em;">Aucun produit trouv√©</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- INVENTORY MODAL -->
<div id="shopInventoryModal" style="
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10000;
    align-items: center;
    justify-content: center;
">
    <div style="
        background: linear-gradient(135deg, rgba(40, 40, 40, 0.98) 0%, rgba(50, 50, 50, 0.98) 100%);
        border: 1px solid rgba(0, 144, 255, 0.3);
        border-radius: 8px;
        width: 90%;
        max-width: 800px;
        max-height: 80vh;
        display: flex;
        flex-direction: column;
        box-shadow: none;
        backdrop-filter: blur(10px);
    ">
        <!-- Modal Header -->
        <div style="
            padding: 24px;
            border-bottom: 1px solid rgba(120, 120, 120, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(50, 50, 50, 0.6) 0%, rgba(40, 40, 40, 0.6) 100%);
        ">
            <h2 style="margin: 0; color: #fff; font-size: 1.5em; font-weight: 700;">üì¶ Mon inventaire</h2>
            <button id="shopInventoryCloseBtn" style="
                background: linear-gradient(135deg, rgba(0, 144, 255, 0.7) 0%, rgba(0, 112, 204, 0.7) 100%);
                border: 1px solid rgba(0, 144, 255, 0.4);
                border-radius: 6px;
                color: #fff;
                font-weight: 600;
                cursor: pointer;
                padding: 8px 16px;
                transition: all 0.3s ease;
                font-size: 0.95em;
            " onmouseover="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 1) 0%, rgba(0, 112, 204, 1) 100%)';this.style.boxShadow='0 4px 12px rgba(0, 144, 255, 0.4)';" onmouseout="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 0.7) 0%, rgba(0, 112, 204, 0.7) 100%)';this.style.boxShadow='none';">‚úï</button>
        </div>

        <!-- Modal Content -->
        <div id="shopInventoryContent" style="
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            color: #fff;
        ">
            <div style="text-align: center; color: rgba(255, 255, 255, 0.6); padding: 40px;">
                <p style="font-size: 1.1em;">Vous n'avez pas encore d'articles</p>
            </div>
        </div>
    </div>
</div>

<!-- PURCHASE CONFIRMATION MODAL -->
<div id="shopPurchaseConfirmModal" style="
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10001;
    align-items: center;
    justify-content: center;
">
    <div style="
        background: linear-gradient(135deg, rgba(40, 40, 40, 0.98) 0%, rgba(50, 50, 50, 0.98) 100%);
        border: 1px solid rgba(0, 144, 255, 0.3);
        border-radius: 8px;
        width: 90%;
        max-width: 500px;
        display: flex;
        flex-direction: column;
        box-shadow: 0 0 30px rgba(0, 144, 255, 0.2);
        backdrop-filter: blur(10px);
    ">
        <!-- Modal Header -->
        <div style="
            padding: 24px;
            border-bottom: 1px solid rgba(120, 120, 120, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(50, 50, 50, 0.6) 0%, rgba(40, 40, 40, 0.6) 100%);
        ">
            <h2 style="margin: 0; color: #fff; font-size: 1.3em; font-weight: 700;">‚ùì Confirmation d'achat</h2>
            <button id="shopPurchaseConfirmCloseBtn" style="
                background: linear-gradient(135deg, rgba(0, 144, 255, 0.7) 0%, rgba(0, 112, 204, 0.7) 100%);
                border: 1px solid rgba(0, 144, 255, 0.4);
                border-radius: 6px;
                color: #fff;
                font-weight: 600;
                cursor: pointer;
                padding: 8px 16px;
                font-size: 0.95em;
                transition: all 0.3s ease;
            " onmouseover="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 1) 0%, rgba(0, 112, 204, 1) 100%)';this.style.boxShadow='0 4px 12px rgba(0, 144, 255, 0.4)';" onmouseout="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 0.7) 0%, rgba(0, 112, 204, 0.7) 100%)';this.style.boxShadow='none';">‚úï</button>
        </div>

        <!-- Modal Content -->
        <div style="
            padding: 32px;
            color: #fff;
            text-align: center;
        ">
            <div id="shopPurchaseConfirmMessage" style="
                font-size: 1em;
                line-height: 1.6;
                margin-bottom: 24px;
                color: rgba(255, 255, 255, 0.9);
            "></div>
        </div>

        <!-- Modal Footer with Buttons -->
        <div style="
            padding: 24px;
            border-top: 1px solid rgba(120, 120, 120, 0.3);
            display: flex;
            gap: 12px;
            justify-content: center;
            background: linear-gradient(135deg, rgba(50, 50, 50, 0.4) 0%, rgba(40, 40, 40, 0.4) 100%);
        ">
            <button id="shopPurchaseConfirmNo" style="
                flex: 1;
                padding: 12px 24px;
                background: linear-gradient(135deg, rgba(0, 144, 255, 0.7) 0%, rgba(0, 112, 204, 0.7) 100%);
                border: 1px solid rgba(0, 144, 255, 0.4);
                border-radius: 6px;
                color: #fff;
                font-weight: 600;
                cursor: pointer;
                font-size: 0.95em;
                transition: all 0.3s ease;
            " onmouseover="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 1) 0%, rgba(0, 112, 204, 1) 100%)';this.style.boxShadow='0 4px 12px rgba(0, 144, 255, 0.4)';" onmouseout="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 0.7) 0%, rgba(0, 112, 204, 0.7) 100%)';this.style.boxShadow='none';">
                Non
            </button>
            <button id="shopPurchaseConfirmYes" style="
                flex: 1;
                padding: 12px 24px;
                background: linear-gradient(135deg, rgba(0, 144, 255, 0.9) 0%, rgba(0, 112, 204, 0.9) 100%);
                border: 1px solid rgba(0, 144, 255, 0.4);
                border-radius: 6px;
                color: #fff;
                font-weight: 600;
                cursor: pointer;
                font-size: 0.95em;
                transition: all 0.3s ease;
            " onmouseover="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 1) 0%, rgba(0, 112, 204, 1) 100%)';this.style.boxShadow='0 8px 16px rgba(0, 144, 255, 0.4)';this.style.transform='translateY(-2px)';" onmouseout="this.style.background='linear-gradient(135deg, rgba(0, 144, 255, 0.9) 0%, rgba(0, 112, 204, 0.9) 100%)';this.style.boxShadow='none';this.style.transform='translateY(0)';">
                Oui
            </button>
        </div>
    </div>
</div>

<style>
#cguContainer {
  display: grid;
  grid-template-columns: 80px 1fr;
  gap: 0;
  height: 100vh;
  margin: 0;
  padding: 0;
  width: 100vw;
}

#cguContainer[style*="display: none"] {
  display: none !important;
}

#cguContainer .landing-main-column {
  width: 100% !important;
  grid-column: 2 !important;
  grid-row: 1 / -1 !important;
}
</style>

<script src="assets/js/scripts/shop.js"></script>
