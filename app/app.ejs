<% const LAUNCHER_VERSION = 'v3.0'; %>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" http-equiv="Content-Security-Policy" content="script-src 'self' 'sha256-In6B8teKZQll5heMl9bS7CESTbGvuAt3VVV86BUQBDk='"/>
    <title><%= lang('app.title') %></title>
    <link type="text/css" rel="stylesheet" href="./assets/css/optimization.css">
    <script src="./assets/js/tokenmanager.js"></script>
    <script src="./assets/js/wheelmanager.js"></script>
    <script src="./assets/js/scripts/uicore.js"></script>
    <script src="./assets/js/scripts/uibinder.js"></script>
    <link type="text/css" rel="stylesheet" href="./assets/css/launcher.css">

    <style>
        * {
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        body {
            background-color: #18191c;
            background-image: none;
            -webkit-user-select: none;
            overflow: hidden;
            margin: 0;
            padding: 0;
            transition: none;
        }

        #main {
            display: none;
            height: calc(100% - 22px);
            background: linear-gradient(to top, rgba(0, 0, 0, 0.75) 0%, rgba(0, 0, 0, 0) 100%);
            width: 100%;
            position: absolute;
            z-index: 10;
            will-change: opacity;
        }

        #main[overlay] {
            filter: blur(3px) contrast(0.9) brightness(1.0);
        }

        /* Loader - Barre de chargement moderne */
        #loadingContainer {
            background: transparent !important;
        }

        #loadingContainer #loadSpinnerContainer{
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            gap: 40px !important;
            position: relative !important;
        }

        #loadingContainer #loadCenterImage{
            display: block !important;
            position: static !important;
            transform: none !important;
            width: 120px !important;
            height: 120px !important;
        }

        /* Texte de chargement */
        #loadingContainer #loadingText {
            font-size: 1.1em !important;
            color: #fff !important;
            font-weight: 500 !important;
            letter-spacing: 0.5px !important;
            margin-bottom: 16px !important;
        }

        /* Barre de chargement moderne */
        #loadingContainer #progressBar {
            width: 300px !important;
            height: 4px !important;
            background: rgba(255,255,255,0.2) !important;
            border-radius: 2px !important;
            overflow: hidden !important;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
        }

        #loadingContainer #progressFill {
            height: 100% !important;
            background: linear-gradient(90deg, #fff 0%, rgba(255,255,255,0.8) 100%) !important;
            border-radius: 2px !important;
            animation: progressAnimation 2s ease-in-out forwards !important;
        }

        @keyframes progressAnimation {
            0% {
                width: 0%;
            }
            100% {
                width: 100%;
            }
        }
    </style>
</head>

<body bkid="<%=bkid%>">
    <%- include('frame') %>

    <div id="main">
        <%- include('welcome') %>
        <%- include('login') %>
        <%- include('waiting') %>
        <%- include('loginOptions') %>
        <%- include('settings') %>
        <%- include('cgu') %>
        <%- include('help') %>
        <%- include('wheel') %>
        <%- include('landing') %>
    </div>

    <%- include('overlay') %>

    <div id="loadingContainer">
        <div id="loadingContent">
            <div id="loadSpinnerContainer">
                <!-- Logo -->
                <img id="loadCenterImage" src="assets/images/LoadingSeal.png">

                <!-- Texte -->
                <div id="loadingText">Chargement de VanylaPlus Launcher</div>

                <!-- Barre de chargement -->
                <div id="progressBar">
                    <div id="progressFill"></div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
